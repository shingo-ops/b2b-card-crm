# 仕入れ元在庫管理システム仕様書

## 最終更新: 2026-01-12
## バージョン: 1.0
## ステータス: 棚卸し完了、設計待ち

---

# 1. 概要

## 1.1 スプレッドシート情報

| 項目 | 内容 |
|------|------|
| スプレッドシートID | 1IvM1lBvPRPJRaMLODHYgWwDJzu1j038hYQxrk6ipZPs |
| URL | https://docs.google.com/spreadsheets/d/1IvM1lBvPRPJRaMLODHYgWwDJzu1j038hYQxrk6ipZPs/edit |
| シート数 | 24 |

## 1.2 用途

- タイトル別在庫管理（Pokemon、One Piece、Dragon Ball等）
- 商品マスタ管理
- 図鑑データ参照（ポケモン図鑑、トレーナー図鑑）
- GPTナレッジベース
- 在庫集計・出力

---

# 2. シート構成

## 2.1 シート一覧

| # | シート名 | gid | データ行数 | 列数 | 用途 |
|---|---------|-----|-----------|-----|------|
| 1 | API解析 | 1382951829 | 7行 | 42列 | API応答の解析 |
| 2 | 出力 | 2083505295 | 297行 | 18列 | データ出力用 |
| 3 | 集計 | 2020632226 | 179行 | 18列 | 在庫集計 |
| 4 | FLAG_Single | 1638903606 | 4行 | 18列 | シングル品フラグ |
| 5 | FLAG_Error | 365515348 | 74行 | 18列 | エラーフラグ |
| 6 | Discordメッセージ | 1392185638 | 2行 | 5列 | Discord通知テンプレート |
| 7 | Single&Promo | 1311014928 | 9行 | 13列 | シングル・プロモ品 |
| 8 | Pokemon BB | 942504769 | 65行 | 23列 | ポケモンブースターボックス在庫 |
| 9 | One Piece | 820051649 | 24行 | 19列 | ワンピース在庫 |
| 10 | Dragon Ball | 1483600208 | 8行 | 19列 | ドラゴンボール在庫 |
| 11 | Yu-Gi-Oh! | 1233179519 | 0行 | 17列 | 遊戯王（未使用） |
| 12 | GUNDUM | 1183698400 | 4行 | 19列 | ガンダム在庫 |
| 13 | Weiss Shwarz | 500557543 | 0行 | 17列 | ヴァイスシュヴァルツ（未使用） |
| 14 | Union Arena | 1338539752 | 0行 | 19列 | ユニオンアリーナ（未使用） |
| 15 | Degimon | 686074595 | 0行 | 17列 | デジモン（未使用） |
| 16 | hololive | 70892526 | 0行 | 17列 | ホロライブ（未使用） |
| 17 | LORCANA | 2141344228 | 0行 | 17列 | ロルカナ（未使用） |
| 18 | Xross Stars | 1965734156 | 0行 | 17列 | クロススターズ（未使用） |
| 19 | 商品マスタ | 387162343 | 208行 | 16列 | 商品マスタ |
| 20 | ポケモン図鑑 | 1530884562 | 1036行 | 5列 | ポケモン図鑑データ |
| 21 | トレーナー図鑑 | 1592265228 | 1036行 | 5列 | トレーナー図鑑データ |
| 22 | GPT_Knowledge | 1956644059 | 208行 | 10列 | GPT用ナレッジベース |
| 23 | 集計ルール | 265163147 | 4行 | 3列 | 集計ルール設定 |
| 24 | 設定 | 869174263 | 999行 | 17列 | システム設定 |

## 2.2 シート分類

| カテゴリ | シート |
|---------|--------|
| タイトル別在庫 | Pokemon BB、One Piece、Dragon Ball、GUNDUM、Yu-Gi-Oh!、Weiss Shwarz、Union Arena、Degimon、hololive、LORCANA、Xross Stars |
| 特殊商品 | Single&Promo |
| 集計・出力 | 集計、出力、FLAG_Single、FLAG_Error |
| マスタ・図鑑 | 商品マスタ、ポケモン図鑑、トレーナー図鑑 |
| AI連携 | GPT_Knowledge、API解析 |
| システム | 設定、集計ルール、Discordメッセージ |

---

# 3. タイトル別シート

## 3.1 稼働中タイトル

| タイトル | シート名 | データ件数 | 列数 | 状態 |
|---------|---------|-----------|-----|------|
| Pokemon | Pokemon BB | 65件 | 23列 | 稼働中 |
| One Piece | One Piece | 24件 | 19列 | 稼働中 |
| Dragon Ball | Dragon Ball | 8件 | 19列 | 稼働中 |
| GUNDAM | GUNDUM | 4件 | 19列 | 稼働中 |

## 3.2 未使用タイトル（将来拡張用）

| タイトル | シート名 | 状態 |
|---------|---------|------|
| 遊戯王 | Yu-Gi-Oh! | 未使用 |
| ヴァイスシュヴァルツ | Weiss Shwarz | 未使用 |
| ユニオンアリーナ | Union Arena | 未使用 |
| デジモン | Degimon | 未使用 |
| ホロライブ | hololive | 未使用 |
| ロルカナ | LORCANA | 未使用 |
| クロススターズ | Xross Stars | 未使用 |

## 3.3 タイトル別シートの共通構造（推定）

各タイトルシートは17-23列で構成され、以下の項目が含まれると推定：
- 商品名
- SKU
- 在庫数
- 価格
- 仕入れ元
- 更新日時

---

# 4. マスタ・図鑑データ

## 4.1 商品マスタ

| 項目 | 内容 |
|------|------|
| シート名 | 商品マスタ |
| gid | 387162343 |
| データ件数 | 208件 |
| 列数 | 16列 |

## 4.2 図鑑データ

| 図鑑名 | シート名 | データ件数 |
|--------|---------|-----------|
| ポケモン図鑑 | ポケモン図鑑 | 1036件 |
| トレーナー図鑑 | トレーナー図鑑 | 1036件 |

## 4.3 GPTナレッジベース

| 項目 | 内容 |
|------|------|
| シート名 | GPT_Knowledge |
| gid | 1956644059 |
| データ件数 | 208件 |
| 列数 | 10列 |
| 用途 | ChatGPT/Geminiへの商品知識提供 |

---

# 5. 既存GAS機能

⚠️ バインドスクリプトの詳細は、スプレッドシートを開いて「拡張機能」→「Apps Script」で確認してください。

## 5.1 推定される機能（シート構成から）

| 機能 | 根拠 |
|------|------|
| API連携 | API解析シート |
| Discord通知 | Discordメッセージシート |
| 在庫集計 | 集計シート、集計ルールシート |
| エラー検出 | FLAG_Errorシート |
| シングル品検出 | FLAG_Singleシート |

---

# 6. CRMとの連携ポイント

| CRMの項目 | 在庫管理の項目 | 連携方法 |
|----------|---------------|---------|
| 取り扱い商材 | タイトル別シート | 商談時に在庫確認 |
| 商談中の在庫確認 | 各タイトルシートの在庫数 | リアルタイム参照 |
| 見積もり作成 | 商品マスタ | 商品情報・価格参照 |
| Buddy知識 | GPT_Knowledge | 商品知識の提供 |

---

# 7. アプリ化の優先順位（案）

| 優先度 | 機能 | 理由 |
|--------|------|------|
| 🔴 高 | 在庫検索 | 商談中に即座に確認したい |
| 🔴 高 | タイトル別在庫一覧 | 在庫状況を素早く把握 |
| 🟡 中 | 在庫アラート | 在庫切れ防止 |
| 🟡 中 | 商品マスタ検索 | 商品情報の参照 |
| 🟢 低 | 図鑑参照 | 必要時のみ |
| 🟢 低 | GPTナレッジ更新 | 定期的な更新 |

---

# 8. 注意事項

1. **未使用シートの取り扱い**
   - 7タイトルが未使用（将来の拡張用）
   - 削除せず、新タイトル追加時に活用

2. **図鑑データ**
   - ポケモン図鑑・トレーナー図鑑は各1036件
   - 検索時はパフォーマンスに注意

3. **設定シート**
   - 999行と大容量
   - システム全体の設定を管理

---

# 9. 更新履歴

| 日付 | バージョン | 更新内容 |
|------|-----------|----------|
| 2026-01-12 | 1.0 | 初版作成（棚卸し結果） |

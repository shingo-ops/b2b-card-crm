# PMOセッションログ

このファイルはPMO（Claude）とオーナーの壁打ちセッションの記録です。
技術的な変更履歴はDEVELOPMENT_LOG.mdに、議論・決定事項・ハイライトはここに記録します。

---

## セッション: 2026-01-11

### 実施内容
1. GitHub初期セットアップ
   - リポジトリ: sales-ops-with-claude
   - ブランチ戦略: main/develop
   - CLAUDE.md作成

2. PMO通知システム構築
   - Discord Webhook連携
   - 作業完了通知、週次レビュー通知

3. 仕様違反の発生と対策
   - 問題: スタンドアロンスクリプトが作成された（禁止事項）
   - 原因: CLAUDE.mdを読まずに作業開始、実装前確認なし
   - 対策: 実装前宣言の義務化、完了報告の仕様照合チェック

4. CRM機能追加
   - プルダウン仕様変更（流入経路IN/OUT分離）
   - その他→自由記述機能
   - 設定更新機能（差分のみ追加）
   - 強制リセットのパスワード保護
   - Adminページ + 権限管理
   - サイドメニュー化
   - 担当者管理ページ
   - UIデザイン改善

### 重要な決定事項

| 決定 | 理由 |
|------|------|
| スタンドアロンスクリプト禁止 | スプレッドシート連携ができない |
| 実装前宣言の義務化 | 仕様違反を事前に防止 |
| サイドメニューを全アプリ共通UIとして採用 | メインコンテンツを広く使える |
| 権限管理はアプリ側で実装 | 細かい権限設定が可能 |
| アーキテクチャ: SS=DB、GAS=バックエンド、アプリ=フロント | 現状の規模に最適 |
| ボタン色: メイン=青(#0b58cf)、削除/危険=赤(#dc3545) | UI統一 |
| サイドメニューアクティブ色: オレンジ(#FF6B35) | 視認性 |
| 流入経路のデフォルト値: 空 | ビジネスごとに異なるため |
| 列サイズの自動調整: しない | オーナーが手動調整 |
| デプロイルール: 本番ID固定 + テスト@HEAD | 運用の明確化、混乱防止。不変のルールとして確定 |

### アーキテクチャ

- 3層構造: Webアプリ（フロント）→ GAS（バックエンド）→ スプレッドシート（DB）
- 運用ルール: 営業はアプリのみ使用、シートURLは共有しない
- スケール条件: 15人超え→再評価、500万セル超え→Firebase検討

### 仕様違反の分析と対策

#### 根本原因
1. CLAUDE.mdを読み込む強制力がなかった
2. 実装前の仕様確認プロセスがなかった

#### 対策
- 作業依頼テンプレートでCLAUDE.md読み込み強制
- 実装前宣言の義務化
- 完了報告の仕様照合チェック

### 次回のアクション
- [ ] 権限による画面制御（将来実装）
- [ ] ログイン時の役割取得（将来実装）
- [ ] モバイル対応（将来）

### 未解決・保留事項
- 営業担当者マスタの用途確認（おそらく不要、削除検討）

---

## テンプレート（次回セッション用）

## セッション: YYYY-MM-DD

### 実施内容
-

### 重要な決定事項
| 決定 | 理由 |
|------|------|

### 議論のハイライト
-

### 次回のアクション
- [ ]

### 未解決・保留事項
-

# 理解度チェック質問リスト

## 概要

実装前にClaude Codeの理解度を確認し、解釈のズレを防ぐための質問リスト。
仕様書作成後、実装開始前に回答することで、認識のズレを事前に検出する。

**導入日**: 2026-01-17
**参照**: TROUBLE-018（解釈率100%を目指す開発プロセス改善）

---

## 使用タイミング

```
ユーザー指示
    ↓
仕様書作成
    ↓
【理解度チェック実施】 ← ここで使用
    ↓
ユーザー確認・承認
    ↓
実装開始
```

---

## 必須質問（Q1〜Q5）

### Q1: 目的の理解

> この機能の目的を一言で説明してください。
> ユーザーが得られる価値は何ですか？

**回答欄:**
```
目的:
ユーザー価値:
```

---

### Q2: スコープの確認

> 今回の実装に「含まれるもの」と「含まれないもの」を明確にしてください。

**回答欄:**
```
含まれるもの:
-

含まれないもの（スコープ外）:
-
```

---

### Q3: 技術的制約の認識

> 使用する技術・環境の制約を列挙してください。

**回答欄:**
```
| 制約 | 内容 | 対処法 |
|------|------|--------|
| GAS実行時間 | 6分制限 | |
| LockService | 排他制御必須 | |
| | | |
```

---

### Q4: リスクと対策

> 想定されるリスクと、その対策を挙げてください。

**回答欄:**
```
| リスク | 発生確率 | 影響度 | 対策 |
|--------|----------|--------|------|
| | 低/中/高 | 低/中/高 | |
| | 低/中/高 | 低/中/高 | |
```

---

### Q5: 成功基準

> この実装が「成功」と言えるのは、どのような状態ですか？

**回答欄:**
```
成功基準:
1.
2.
3.

検証方法:
1.
2.
```

---

## GAS専用質問（Q6〜Q10）

GAS開発時は以下も回答必須。

### Q6: 排他制御の必要性

> insertSheet/deleteSheetを使用しますか？使用する場合、LockServiceを実装しますか？

**回答欄:**
```
insertSheet使用: あり/なし
deleteSheet使用: あり/なし
LockService実装: 済/未
```

---

### Q7: 同時アクセスの想定

> 複数ユーザーが同時にアクセスする可能性はありますか？
> その場合、どのように対処しますか？

**回答欄:**
```
同時アクセス: あり/なし
対処法:
```

---

### Q8: データ量と処理時間

> 想定されるデータ量と、処理時間の見積もりを教えてください。

**回答欄:**
```
想定データ量: 行
想定処理時間: 秒
6分制限への対応:
```

---

### Q9: google.script.run戻り値

> クライアントに返すデータにDateオブジェクトが含まれますか？
> 含まれる場合、シリアライズ対応はしていますか？

**回答欄:**
```
Dateオブジェクト: 含む/含まない
シリアライズ対応: 済/未
対応方法: toISOString() / JSON.stringify() / その他
```

---

### Q10: セキュリティ考慮

> XSS対策、認証情報の扱いについて説明してください。

**回答欄:**
```
XSS対策: textContent使用 / innerHTML禁止 / その他
認証情報: スクリプトプロパティ / ハードコード禁止
その他:
```

---

## 判定基準

| 評価 | 基準 |
|------|------|
| ✅ 合格 | Q1〜Q5全て明確に回答。GAS開発ならQ6〜Q10も明確。 |
| ⚠️ 要確認 | 回答に曖昧な部分がある。ユーザーに確認後、再回答。 |
| ❌ 不合格 | 重要な質問に回答できない。仕様の再確認が必要。 |

---

## 運用ルール

1. **仕様書作成後、実装前に必ず実施**
2. Claude Codeが自己回答し、ユーザーに提示
3. ユーザーが回答を確認し、認識のズレがあれば指摘
4. 全質問が合格になってから実装開始

---

## テンプレート（コピー用）

```markdown
## 理解度チェック回答

### Q1: 目的の理解
- 目的:
- ユーザー価値:

### Q2: スコープの確認
- 含まれるもの:
- 含まれないもの:

### Q3: 技術的制約の認識
| 制約 | 内容 | 対処法 |
|------|------|--------|
| | | |

### Q4: リスクと対策
| リスク | 発生確率 | 影響度 | 対策 |
|--------|----------|--------|------|
| | | | |

### Q5: 成功基準
- 成功基準:
- 検証方法:

### GAS専用（該当する場合）
- Q6: insertSheet/deleteSheet: 使用する/しない、LockService: 実装済/未
- Q7: 同時アクセス: あり/なし、対処法:
- Q8: データ量: 行、処理時間: 秒
- Q9: Dateオブジェクト: 含む/含まない、シリアライズ: 済/未
- Q10: XSS対策: 済、認証情報: スクリプトプロパティ
```

---

## 関連ドキュメント

- GAS_SPEC_TEMPLATE.md: GAS機能仕様書テンプレート
- CLAUDE.md セクション11: GAS排他制御ルール
- TROUBLE-018: GAS競合状態エラー

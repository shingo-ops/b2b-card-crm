# AGENT_COOPERATION_SPEC.md - エージェント協力関係仕様書

> **バージョン**: v1.0.0
> **作成日時**: 2026-01-15
> **作成者**: Human + Claude Code + 全エージェント議論
> **ステータス**: 承認済み

---

## 1. ドキュメント定義（5W2H）

| 項目 | 内容 |
|------|------|
| **いつ** | 2026-01-15 議論21-22の結果 |
| **誰が** | 全39エージェント + Human承認 |
| **どこで** | 全エージェント協力場面 |
| **何を** | エージェント間協力関係の設計・運用フレームワーク |
| **どうやって** | 5W2H導入 + PDCAサイクル自動改善 |
| **なぜ** | 持続的な効果向上と専門性の最大活用 |
| **どれぐらい** | 導入時5W2H + 運用時PDCA（週次Check/月次Act） |

---

## 2. 基本思想

### 2.1 従来のアドホック方式との違い

| 観点 | アドホック方式 | 本仕様（PDCAサイクル方式） |
|------|----------------|---------------------------|
| 設計 | 都度判断 | 事前に5W2Hで明確化 |
| 導入 | 必要時に招集 | 計画的にアサイン |
| 評価 | なし（暗黙的） | 定期的に効果測定 |
| 改善 | 個別対応 | 体系的に最適化 |
| 持続性 | 低い | 高い |
| 学習効果 | 蓄積しにくい | 蓄積される |

### 2.2 期待効果

| 効果 | 説明 |
|------|------|
| 専門性の最大活用 | 各エージェントが得意分野で貢献 |
| 持続的改善 | PDCAによる継続的な効果向上 |
| 透明性 | 5W2Hによる目的・効果の明確化 |
| 自律性 | 自動測定・自動改善提案 |

---

## 3. 導入フェーズ：5W2Hフレームワーク

### 3.1 協力関係導入シート

新しい協力関係を導入する際は、以下のテンプレートを使用する。

```markdown
## 協力関係導入シート

### 基本情報
- 協力関係ID: COOP-YYYY-MM-DD-XXX
- 作成日: YYYY-MM-DD
- 作成者: [エージェント名 or Human]

### 5W2H定義

| 項目 | 内容 |
|------|------|
| **When** | いつ発動するか（トリガー条件） |
| **Who** | 誰が協力するか（参加エージェント） |
| **Where** | どの場面で（対象領域・機能） |
| **What** | 何を達成するか（目標） |
| **Why** | なぜ必要か（背景・課題） |
| **How** | どう協力するか（プロセス） |
| **How much** | どれぐらいの効果を期待するか（KPI） |

### 期待効果
- 定量的効果: [数値目標]
- 定性的効果: [期待する変化]

### 成功基準
- [測定可能な基準1]
- [測定可能な基準2]

### 承認
- [ ] 決裁者承認
- [ ] Human承認（重大変更時）
```

### 3.2 導入時の議論プロセス

```
1. 課題発見
   └─ 分析特化 or 現場エージェントが課題を検知

2. 協力関係提案
   └─ 5W2Hシートを作成

3. 会議モード議論
   ├─ 関連エージェントが参加
   ├─ 適切なエージェント選定を議論
   └─ KPIを設定

4. 決裁者承認
   └─ CEO or 担当C-suiteが承認

5. 導入実行
   └─ 協力関係を有効化
```

---

## 4. 運用フェーズ：PDCAサイクル

### 4.1 サイクル概要図

```
┌─────────────────────────────────────────────────────────────────┐
│              エージェント協力関係 PDCAサイクル                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  【Plan】協力関係設計                                           │
│  ├─ 5W2Hで目的・効果を明確化                                   │
│  ├─ 適切なエージェントを選定                                   │
│  └─ KPIを設定                                                  │
│       │                                                         │
│       ▼                                                         │
│  【Do】導入・実行                                               │
│  ├─ エージェントをアサイン                                     │
│  ├─ 協力関係を有効化                                           │
│  └─ 実行ログを記録                                             │
│       │                                                         │
│       ▼                                                         │
│  【Check】効果測定（自動）                                      │
│  ├─ 週次: KPI達成率を分析特化が測定                            │
│  ├─ 月次: 効果レポートを自動生成                               │
│  └─ 閾値未達時: 自動アラート発行                               │
│       │                                                         │
│       ▼                                                         │
│  【Act】改善（会議モード）                                      │
│  ├─ 効果低下時: 会議モードで原因分析                           │
│  ├─ エージェント変更案を議論                                   │
│  └─ 決裁者が改善策を決定 → Planへ戻る                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 各フェーズ詳細

#### 【Plan】協力関係設計

| 項目 | 内容 |
|------|------|
| 実施者 | 提案エージェント + 関連エージェント |
| 成果物 | 5W2H協力関係導入シート |
| 承認者 | 決裁者（重大変更時はHuman） |

#### 【Do】導入・実行

| 項目 | 内容 |
|------|------|
| 実施者 | システム（自動） |
| 成果物 | 協力関係の有効化、実行ログ |
| 記録 | 全協力リクエスト・レスポンスを記録 |

#### 【Check】効果測定

| 頻度 | 内容 | 実施者 |
|------|------|--------|
| 日次 | 実行ログ収集 | システム（自動） |
| 週次 | KPI達成率算出 | Suji Yomu（分析特化） |
| 月次 | 効果レポート生成 | Matome Tsutaeru（レポート特化） |

#### 【Act】改善

| 項目 | 内容 |
|------|------|
| 実施者 | 会議モード（関連エージェント） |
| トリガー | 効果低下、効果停滞、異常検知、定期レビュー |
| 成果物 | 改善案、エージェント変更提案 |
| 承認者 | 決裁者 |

---

## 5. 自動改善トリガー

### 5.1 トリガー条件

| トリガー | 条件 | 会議モード | 参加者 |
|----------|------|-----------|--------|
| 効果低下 | KPI達成率 < 70% が2週連続 | 詳細 | 関連エージェント全員 |
| 効果停滞 | KPI改善なし が1ヶ月継続 | 詳細 | 改善特化 + 分析特化 + 決裁者 |
| 異常検知 | 想定外のパターン発生 | 詳細 | Devil's Advocate + 関連エージェント |
| 定期レビュー | 月次（自動） | 簡潔 | 分析特化 → 決裁者 |

### 5.2 改善回数の上限

| 項目 | 設定 |
|------|------|
| 改善試行上限 | 3回 |
| 上限到達時 | 安定化判定 or Human判断を仰ぐ |

---

## 6. 協力レベル定義

| Level | 名称 | 参加人数 | 用途 | タイムアウト |
|-------|------|----------|------|-------------|
| L1 | ペア協力 | 2名 | 軽微な確認、専門的質問 | 1秒 |
| L2 | 小グループ | 3-5名 | 中程度の判断、複数視点必要 | 3秒 |
| L3 | チーム議論 | 6-10名 | 重要な決定、多角的検討 | 5秒 |
| L4 | 全体会議 | 11名以上 | 戦略的決定、組織的影響 | 10秒 |

---

## 7. 責任所在

| 場面 | 責任者 |
|------|--------|
| 協力リクエスト発行 | 発動エージェント |
| 意見提供 | 各協力エージェント |
| 最終決定（通常） | 発動エージェント |
| 最終決定（対立時） | 決裁者 |
| 効果測定 | 分析特化（Suji Yomu） |
| 改善提案 | 改善特化（Kaizen Susumu） |

---

## 8. データモデル

### 8.1 協力関係定義

```typescript
interface CooperationDefinition {
  cooperation_id: string;           // COOP-YYYY-MM-DD-XXX
  created_at: string;
  created_by: AgentName | 'Human';

  // 5W2H
  when: string;                     // トリガー条件
  who: AgentName[];                 // 参加エージェント
  where: string;                    // 対象領域
  what: string;                     // 目標
  why: string;                      // 背景・課題
  how: string;                      // プロセス
  how_much: KPIDefinition[];        // KPI

  // メタ情報
  status: 'draft' | 'active' | 'suspended' | 'archived';
  approved_by: AgentName;
  approved_at: string;
}
```

### 8.2 効果測定レコード

```typescript
interface EffectivenessRecord {
  cooperation_id: string;
  measured_at: string;
  measured_by: AgentName;           // 通常: Suji Yomu

  kpi_results: {
    kpi_name: string;
    target: number;
    actual: number;
    achievement_rate: number;       // 0-100%
  }[];

  overall_score: number;            // 0-100
  trend: 'improving' | 'stable' | 'declining';

  auto_trigger?: {
    triggered: boolean;
    trigger_type: 'decline' | 'stagnation' | 'anomaly' | 'review';
    meeting_id?: string;
  };
}
```

---

## 9. 既存チームとの関係

AGENT_TEAMWORK_SPEC.mdで定義された7つのチームは、本仕様の「事前定義された協力関係」として位置づける。

| チーム | 協力関係ID | 状態 |
|--------|-----------|------|
| 商談支援チーム | COOP-PRESET-001 | active |
| 成長支援チーム | COOP-PRESET-002 | active |
| 体験設計チーム | COOP-PRESET-003 | active |
| 安定稼働チーム | COOP-PRESET-004 | active |
| リスク管理チーム | COOP-PRESET-005 | active |
| 戦略立案チーム | COOP-PRESET-006 | active |
| 士気向上チーム | COOP-PRESET-007 | active |

これらのチームもPDCAサイクルの対象となり、効果測定・改善が行われる。

---

## 10. Human関与ポイント

| 場面 | Human関与 |
|------|-----------|
| 新規協力関係導入（軽微） | 不要（決裁者承認のみ） |
| 新規協力関係導入（重大） | 必須 |
| 定期レビュー | 任意（レポート共有） |
| 改善提案（軽微） | 不要 |
| 改善提案（エージェント変更） | 必須 |
| 改善上限到達時 | 必須 |

---

## 11. 更新履歴

| 日時 | 更新者 | バージョン | 内容 |
|------|--------|-----------|------|
| 2026-01-15 | Claude Code | v1.0.0 | 初版作成（DISC-021/022承認） |

---

## 12. 承認履歴

| 議論ID | 内容 | 承認日時 |
|--------|------|---------|
| DISC-2026-01-15-021 | エージェント間協力機能基本設計 | 2026-01-15 |
| DISC-2026-01-15-022 | 5W2H導入 + PDCA自動改善サイクル | 2026-01-15 |

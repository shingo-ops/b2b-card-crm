# AI監査体制プラン提案書

**作成日**: 2026-01-17
**作成者**: Claude Code + Gemini（共同作成）
**目的**: 解釈率100%達成のためのマルチAI監査体制の検討

---

## エグゼクティブサマリー

### 推奨プラン: **プランA（2社体制・Flash）**

| 項目 | 値 |
|------|-----|
| 体制 | Claude Code（開発） + Gemini 2.5 Flash（監査） |
| 月額コスト | 約6,500円 |
| 期待解釈率 | 95〜98% |
| 導入難易度 | 低 |

**理由**: コスト効率が最も高く、段階的に3社体制へ移行可能

---

## 1. 解釈率100%に有益な情報（Zenn記事・公式ドキュメントより）

### 1.1 CLAUDE.mdの階層構造（優先度順）

```
┌─────────────────────────────────────────────────────────────┐
│  1. Enterprise policy                                        │
│     /Library/Application Support/ClaudeCode/CLAUDE.md       │
│     → 組織全体のルール                                        │
├─────────────────────────────────────────────────────────────┤
│  2. Project memory                                           │
│     ./CLAUDE.md または ./.claude/CLAUDE.md                  │
│     → チーム共有のプロジェクトルール                          │
├─────────────────────────────────────────────────────────────┤
│  3. Project rules                                            │
│     ./.claude/rules/*.md                                    │
│     → モジュール化された詳細ルール                            │
├─────────────────────────────────────────────────────────────┤
│  4. User memory                                              │
│     ~/.claude/CLAUDE.md                                     │
│     → 個人設定（全プロジェクト共通）                          │
├─────────────────────────────────────────────────────────────┤
│  5. Project local                                            │
│     ./CLAUDE.local.md                                       │
│     → 個人のプロジェクト固有設定（gitignore対象）             │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 解釈率向上のベストプラクティス

| カテゴリ | ベストプラクティス | 効果 |
|----------|-------------------|------|
| **記述方法** | 具体的に記述（「2スペースインデント」＞「適切に整形」） | 曖昧さ排除 |
| **構造化** | マークダウン見出しでグループ化 | 可読性向上 |
| **モジュール化** | `.claude/rules/`で領域別に分割 | 管理性向上 |
| **インポート** | `@path/to/file`で外部ファイル参照 | 再利用性向上 |
| **パス指定** | YAMLフロントマターで適用範囲限定 | 精度向上 |

### 1.3 サブエージェント活用

```yaml
# .claude/agents/code-reviewer.md
---
name: code-reviewer
description: コード品質とセキュリティをレビュー
tools: Read, Glob, Grep
model: sonnet
---

レビューチェックリスト:
- 明確性と可読性
- 適切な命名
- シークレット露出なし
- 入力検証
- テストカバレッジ
```

### 1.4 Plan Modeの活用

複雑な変更は必ずPlan Modeで分析してから実行：

```bash
claude --permission-mode plan
# または Shift+Tab でモード切替
```

---

## 2. 監査体制プラン比較（5W2H）

### プランA: 2社体制（Claude + Gemini Flash）

| 項目 | 内容 |
|------|------|
| **What（何を）** | Claude Codeの開発物をGemini Flashが監査 |
| **Why（なぜ）** | コスト効率最優先で解釈率向上 |
| **Who（誰が）** | Claude: 開発担当、Gemini Flash: 監査担当 |
| **When（いつ）** | 全コミット・PR時に自動実行 |
| **Where（どこで）** | ローカル開発環境 + MCP連携 |
| **How（どうやって）** | MCP経由でGemini CLIを呼び出し |
| **How much（いくら）** | **月額約6,500円**（200タスク/月想定） |

#### メリット
- 最もコスト効率が高い（Proの1/10）
- 100万トークンのコンテキスト対応
- 導入が簡単（既にMCP連携済み）

#### デメリット
- 高度な推論能力はProに劣る
- セキュリティ脆弱性の検出精度はやや低い

#### リスク評価
| リスク | 評価 |
|--------|------|
| 技術的リスク | 中 |
| 運用リスク | 低 |
| 品質リスク | 中 |
| コストリスク | 低 |

---

### プランB: 2社体制（Claude + Gemini Pro）

| 項目 | 内容 |
|------|------|
| **What（何を）** | Claude Codeの開発物をGemini Proが監査 |
| **Why（なぜ）** | 高精度な監査を実現 |
| **Who（誰が）** | Claude: 開発担当、Gemini Pro: 監査担当 |
| **When（いつ）** | 重要な変更・本番デプロイ前 |
| **Where（どこで）** | ローカル開発環境 + MCP連携 |
| **How（どうやって）** | MCP経由でGemini CLIを呼び出し |
| **How much（いくら）** | **月額約8,800円**（200タスク/月想定） |

#### メリット
- 高度な推論能力
- セキュリティ脆弱性の検出精度が高い
- 複雑なビジネスロジックの検証に強い

#### デメリット
- Flashの10倍のコスト
- 応答速度がやや遅い

#### リスク評価
| リスク | 評価 |
|--------|------|
| 技術的リスク | 中 |
| 運用リスク | 中 |
| 品質リスク | 低 |
| コストリスク | 中 |

---

### プランC: 3社体制（Claude + Gemini Flash + OpenAI GPT-4o）

| 項目 | 内容 |
|------|------|
| **What（何を）** | 3社AIによる多角的な開発・監査 |
| **Why（なぜ）** | 解釈率99%以上を目指す |
| **Who（誰が）** | Claude: 開発、Gemini: 監査、OpenAI: セカンドオピニオン |
| **When（いつ）** | クリティカルな変更時 |
| **Where（どこで）** | ローカル + MCP + OpenAI API |
| **How（どうやって）** | オーケストレーター経由で3社連携 |
| **How much（いくら）** | **月額約8,000円**（200タスク/月想定） |

#### メリット
- 多様性による解釈精度の最大化
- 「タイブレーカー」として意見が割れた時の決定票
- 冗長性による耐障害性向上

#### デメリット
- オーケストレーションの複雑性
- 3社間の一貫性維持が困難
- 意思決定の遅延リスク

#### リスク評価
| リスク | 評価 |
|--------|------|
| 技術的リスク | 低（冗長性あり） |
| 運用リスク | 高 |
| 品質リスク | 極低 |
| コストリスク | 中 |

---

### プランD: 3社体制（Claude + Gemini Pro + OpenAI GPT-4o）

| 項目 | 内容 |
|------|------|
| **What（何を）** | 最高精度の3社AI監査体制 |
| **Why（なぜ）** | 解釈率99%以上を確実に達成 |
| **Who（誰が）** | Claude: 開発、Gemini Pro: 主監査、OpenAI: 副監査 |
| **When（いつ）** | 全ての重要変更 |
| **Where（どこで）** | ローカル + MCP + OpenAI API |
| **How（どうやって）** | オーケストレーター経由で3社連携 |
| **How much（いくら）** | **月額約9,500円**（200タスク/月想定） |

#### メリット
- 最高の解釈精度
- 最高のセキュリティ監査品質
- 最高の冗長性

#### デメリット
- 最もコストが高い
- 運用の複雑性が最大
- 過剰品質のリスク

#### リスク評価
| リスク | 評価 |
|--------|------|
| 技術的リスク | 低 |
| 運用リスク | 高 |
| 品質リスク | 極低 |
| コストリスク | 高 |

---

## 3. コスト比較サマリー

| プラン | 月額コスト | 年間コスト | 期待解釈率 |
|--------|-----------|-----------|-----------|
| **A: Claude + Gemini Flash** | **6,500円** | **78,000円** | 95-98% |
| B: Claude + Gemini Pro | 8,800円 | 105,600円 | 96-98% |
| C: Claude + Flash + GPT-4o | 8,000円 | 96,000円 | 97-99% |
| D: Claude + Pro + GPT-4o | 9,500円 | 114,000円 | 98-99%+ |

---

## 4. 推奨アクションプラン

### Phase 1: 2社体制の確立（即時開始）

```
【現状】 Claude Code のみ
    ↓
【Phase 1】 Claude Code + Gemini 2.5 Flash
    - 全コミット・PRの自動レビュー
    - 構文・規約・明らかなバグの検出
    - 月額約6,500円
```

**実装方法**: 既存のMCP連携（`.mcp.json`）を活用

### Phase 2: ハイブリッド運用（1ヶ月後〜）

```
【日常監査】 Gemini Flash (80-90%)
    - 毎回のコミット・PR

【重要監査】 Gemini Pro (10-20%)
    - 本番デプロイ前
    - セキュリティ関連変更
    - 複雑なロジック変更
```

### Phase 3: 3社体制への拡張（必要に応じて）

```
【導入条件】
- 2社体制で解決困難な課題が明確化
- クリティカルなミッションクリティカルシステムの開発
- 予算に余裕がある場合

【導入方法】
- OpenAI Codex CLIをMCPサーバーとして追加
- タイブレーカーとして限定的に使用
```

---

## 5. 監査フロー（2社体制）

```
┌─────────────────────────────────────────────────────────────┐
│  1. ユーザー指示                                              │
│     「機能Xを実装して」                                       │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  2. Claude Code（開発）                                       │
│     - 指示を解釈                                              │
│     - CLAUDE.mdに基づき実行計画                               │
│     - コード生成                                              │
│     - 自己レビュー                                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  3. Gemini（監査）                                            │
│     - 指示とコードの整合性検証                                │
│     - CLAUDE.md準拠性チェック                                 │
│     - セキュリティ・バグの検出                                │
│     - 独立したテスト実行                                      │
└─────────────────────────────────────────────────────────────┘
                            ↓
                    ┌───────────────┐
                    │  問題あり？    │
                    └───────────────┘
                      ↓           ↓
                    Yes          No
                      ↓           ↓
┌─────────────────────┐    ┌─────────────────────┐
│  修正要求            │    │  承認               │
│  - 問題点明記        │    │  - マージ許可       │
│  - 修正案提示        │    │  - 本番デプロイ可   │
└─────────────────────┘    └─────────────────────┘
         ↓
    Claude修正
         ↓
    再監査（3へ戻る）
```

---

## 6. Geminiとの議論サマリー

### Geminiの見解

> 「2社体制をまず確立することを強く推奨します。3社体制はAPIコストに加え、オーケストレーションコストが非常に高くなります。まずは2社体制で強固な連携基盤を構築し、どこまで解釈率を高められるかを見極める方が、遥かにコスト効率に優れます。」

### Claude Codeの見解

2社体制で以下が実現可能：
- 日常的な監査の自動化
- セキュリティリスクの検出
- コード品質の向上
- 解釈率95-98%の達成

3社体制は「保険」として検討可能だが、まずは2社体制の最適化が優先。

---

## 7. 次のアクション

| # | アクション | 担当 | 期限 |
|---|-----------|------|------|
| 1 | 本提案書のレビュー | ユーザー | - |
| 2 | プラン選択 | ユーザー | - |
| 3 | 監査フローの詳細設計 | Claude + Gemini | 選択後 |
| 4 | CLAUDE.mdへの監査ルール追加 | Claude | 選択後 |
| 5 | 運用開始・効果測定 | 全員 | 1ヶ月後 |

---

## 付録: 参考資料

- [Claude Code完全ガイド（Zenn）](https://zenn.dev/heku/books/claude-code-guide)
- [Claude Code公式ドキュメント](https://code.claude.com/docs)
- [Gemini API料金](https://ai.google.dev/pricing)
- [OpenAI API料金](https://openai.com/pricing)

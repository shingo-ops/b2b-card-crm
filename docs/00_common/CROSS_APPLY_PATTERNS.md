# 横展開パターン一覧

**作成日**: 2026-01-18
**目的**: 過去トラから抽出したパターンを管理し、新規問題発生時に照合・適用する

---

## 使用方法

1. **新規問題発生時**: この一覧を参照し、類似パターンがないか確認
2. **過去トラ記録時**: 新パターンを抽出し、この一覧に追加
3. **セッション開始時**: 最新パターンを把握（CLAUDE.md読了時に併せて確認）

---

## パターン一覧

| # | パターン名 | 適用条件 | 対策 | 関連TROUBLE |
|---|-----------|---------|------|-------------|
| P-001 | 環境設定忘れ | 環境設定変更時 | CLAUDE.md Section 19.3に記録 | TROUBLE-028 |
| P-002 | 設定のみ更新で完了扱い | 設定ファイル更新時 | 実操作まで完了しない（Section 16） | TROUBLE-027 |
| P-003 | 口頭合意の未ドキュメント化 | 会話で合意した時 | 即時CLAUDE.mdに追記（Section 17） | TROUBLE-025 |
| P-004 | 新規工程の暗黙仕様見落とし | 新規工程追加時 | ポカヨケテスト実施（Section 18） | TROUBLE-026 |
| P-005 | 未完了タスクの完了報告 | タスク完了報告時 | チェックリスト確認（Section 16） | TROUBLE-023 |
| P-006 | 監査役呼び出し漏れ | ルール変更・ポカヨケ設置時 | Gemini監査必須（Section 10） | TROUBLE-022 |
| P-007 | ポカヨケ設置前報告漏れ | ポカヨケ設置時 | 報告フォーマット使用（Section 15） | TROUBLE-021 |
| P-008 | 複数環境の同期漏れ | コード修正時 | 3環境同期確認（Section 12） | TROUBLE-019 |
| P-009 | GAS排他制御漏れ | GAS並行処理時 | LockService使用（Section 11） | TROUBLE-018 |
| P-010 | セッション開始ルール形骸化 | セッション開始時 | 具体的内容記載必須（Section 0.3） | 抜け穴10 |
| P-011 | コンテキスト再開時スキップ | セッション再開時 | 再開時チェック実施（Section 0.6） | 抜け穴1 |
| P-012 | 過去トラ記録のみで設置漏れ | 過去トラ記録時 | 未設置ポカヨケ確認（Section 0.7） | 抜け穴9 |
| P-013 | Gemini承認エラー時スキップ | Gemini API呼び出し時 | リトライ・人間報告（Section 10） | 抜け穴2 |

---

## パターン分類

### カテゴリA: 記録・ドキュメント漏れ

| # | パターン | 根本原因 |
|---|---------|---------|
| P-001 | 環境設定忘れ | 記録ルールなし |
| P-003 | 口頭合意の未ドキュメント化 | 即時記録習慣なし |
| P-007 | ポカヨケ設置前報告漏れ | 報告フォーマットなし |

### カテゴリB: 完了判定の甘さ

| # | パターン | 根本原因 |
|---|---------|---------|
| P-002 | 設定のみ更新で完了扱い | 実操作確認なし |
| P-005 | 未完了タスクの完了報告 | チェックリストなし |
| P-008 | 複数環境の同期漏れ | 同期確認なし |

### カテゴリC: チェック漏れ

| # | パターン | 根本原因 |
|---|---------|---------|
| P-004 | 新規工程の暗黙仕様見落とし | ポカヨケテストなし |
| P-006 | 監査役呼び出し漏れ | 呼び出しトリガーなし |
| P-009 | GAS排他制御漏れ | 非機能要件チェックなし |

### カテゴリD: セッション管理

| # | パターン | 根本原因 |
|---|---------|---------|
| P-010 | セッション開始ルール形骸化 | 具体性不足 |
| P-011 | コンテキスト再開時スキップ | 再開ルールなし |
| P-012 | 過去トラ記録のみで設置漏れ | 完了管理なし |
| P-013 | Gemini承認エラー時スキップ | エラー時ルールなし |

---

## 新規パターン追加フォーマット

```markdown
| P-XXX | [パターン名] | [適用条件] | [対策] | TROUBLE-XXX |
```

**必須項目**:
1. パターン番号（連番）
2. パターン名（簡潔に）
3. 適用条件（いつ照合するか）
4. 対策（どのセクションを参照するか）
5. 関連TROUBLE番号

---

## 照合チェックリスト

新規問題発生時、以下を確認：

- [ ] カテゴリA（記録・ドキュメント漏れ）に該当するか
- [ ] カテゴリB（完了判定の甘さ）に該当するか
- [ ] カテゴリC（チェック漏れ）に該当するか
- [ ] カテゴリD（セッション管理）に該当するか
- [ ] 該当パターンの対策を適用したか
- [ ] 新パターンとして追加が必要か

---

**以上**
